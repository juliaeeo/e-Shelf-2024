<!-- e-Shelf - Estante virtual de e-books -- Júlia Epischina E. de Oliveira -->

<!DOCTYPE html lang="pt">
<html lang="pt">
  <head>
    <title>e-Shelf</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
  </head>

  <!-- Google tag (gtag.js) -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=G-RQ3KGLM3YR"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-RQ3KGLM3YR");
  </script>

  <body>
    <section id="content-pt">
      <!-- Início do cabeçalho -->
      <header>
        <h1><span class="colored">e</span>Shelf</h1>
        <h2>Estante <span class="colored">virtual</span> de livros</h2>

        <!-- <div class="lang">
        <button id="lang-pt">Português</button>
        <button id="lang-en">English</button>
      </div> -->

        <!-- Adição de div para a conta -->
        <div class="account-box" id="account-toggle">
          <i class="fas fa-user"></i>
          <span class="account-text">Minha Conta</span>
          <i class="fas fa-chevron-down"></i>
          <!-- Ícone da seta para baixo -->
          <div class="account-options" id="account-options">
            <a href="login.html">Entrar</a> ou
            <a href="cadastro.html">Registrar</a>
          </div>
        </div>
      </header>

      <!-- Área de navegação -->

      <main>
        <h4>
          <div class="paragrafo-box0">
            <p>
              e-Shelf salva os seus e-books e livros, categorizando-os em lidos,
              não lidos ou em leitura em andamento.
            </p>
          </div>

          <div class="paragrafo-box1">
            <p>
              É possível visualizar os títulos por situação da leitura e
              ordená-los por ordem alfabética, além de ordenar os livros por
              autor e gênero.
            </p>
          </div>

          <div class="paragrafo-box2">
            <p>
              e-Shelf contabiliza quantos livros categorizados já foram lidos,
              quantificando também os livros lidos por autor e gênero.
            </p>
          </div>

          <div class="paragrafo-box1">
            <p>
              Informe para quem emprestou um livro, controlando mais
              eficientemente sua e-Shelf.
            </p>
          </div>

          <div class="paragrafo-box2">
            <p>
              e-Shelf permite que seja efetuada uma lista de livros para ler no
              futuro.
            </p>
          </div>

          <div class="paragrafo-box1">
            <p>
              Faça o seu login ou seu cadastro para adicionar um livro ao seu
              catálogo pessoal e para acessar sua área privada.
            </p>
          </div>
        </h4>
      </main>
      <!-- rodapé -->
      <footer>
        <p>&copy Todos os direitos reservados - Júlia Epischina</p>
      </footer>
    </section>

    <!-- inserção do javascript-->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="login.js"></script>
    <script src="language.js"></script>

    <!-- Service Worker Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/service-worker.js")
            .then((registration) => {
              console.log(
                "Service Worker registrado com sucesso:",
                registration
              );
            })
            .catch((error) => {
              console.log("Falha ao registrar o Service Worker:", error);
            });
        });
      }
    </script>

    <!-- Adicionar icone PWA -->
    <script>
      let deferredPrompt;

      window.addEventListener("beforeinstallprompt", (e) => {
        // Previne o mini-infobar de aparecer no mobile
        e.preventDefault();
        // Guarda o evento para ser usado mais tarde
        deferredPrompt = e;

        // Exibe um botão ou outro elemento que sugira a instalação
        const installButton = document.createElement("button");
        installButton.id = "installButton"; // Atribui o ID para o estilo
        installButton.textContent = "Adicionar à tela inicial";
        document.body.appendChild(installButton);

        installButton.addEventListener("click", () => {
          // Esconde o botão
          // installButton.style.display = "none";
          installButton.classList.add("hidden"); // Oculta o botão após o clique
          // Exibe o prompt de instalação
          deferredPrompt.prompt();
          // Espera a resposta do usuário
          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === "accepted") {
              console.log("Usuário aceitou a instalação");
            } else {
              console.log("Usuário recusou a instalação");
            }
            deferredPrompt = null;
          });
        });
      });
    </script>
  </body>
</html>
